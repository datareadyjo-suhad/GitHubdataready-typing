<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø©</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

    body {
      font-family: 'Cairo', sans-serif;
      background-image: url('https://images.unsplash.com/photo-1606761568499-6e768d45f3b4?auto=format&fit=crop&w=1400&q=80');
      background-size: cover;
      background-position: center;
      direction: rtl;
      padding: 2rem;
      color: #222;
      text-align: center;
    }
    .container {
      max-width: 750px;
      margin: auto;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    #challenge, #result, #typing-area {
      display: none;
    }
    button {
      background: #d6458b;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 1rem;
      transition: background-color 0.3s;
    }
    button:hover {
      background: #b93b79;
    }
    textarea {
      width: 100%;
      height: 150px;
      margin-top: 1rem;
      font-size: 1.2rem;
      padding: 1rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      resize: none;
      background-color: #f9f9f9;
    }
    #timer {
      font-size: 1.2rem;
      margin: 1rem 0;
      font-weight: bold;
      color: #e63946;
    }
    #error-details {
      margin-top: 1rem;
      padding: 1rem;
      background-color: #fff0f3;
      border: 1px solid #e63946;
      border-radius: 10px;
      color: #b90024;
      text-align: right;
    }
  </style>
</head>
<body>
<div class="container">
  <div id="intro">
    <h2>ğŸ® ØªØ­Ø¯ÙŠ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø©</h2>
    <p>
      ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØŒ Ø±Ø­ ØªØ³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø§Ù„Ø£Ø­Ø±Ù: <strong>F, J, K, D</strong><br>
      Ù„Ø§Ø²Ù… ØªÙƒØªØ¨ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ø¨Ø¯Ù‚Ø© ÙˆØ³Ø±Ø¹Ø© Ø®Ù„Ø§Ù„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯. Ø®Ø° Ù†ÙØ³ ÙˆØ±ÙƒÙ‘Ø² ğŸ‘Š<br>
      Ù„Ø§ ØªÙ†Ø³Ù‰: Ø¨ÙŠÙ† ÙƒÙ„ Ù…Ù‚Ø·Ø¹ ÙŠÙˆØ¬Ø¯ <strong>ÙØ±Ø§Øº ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·!</strong>
    </p>
    <button onclick="startChallenge()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
  </div>

  <div id="challenge">
    <h3>â± Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="timer">120</span> Ø«Ø§Ù†ÙŠØ©</h3>
    <div id="typing-area">
      <p id="text-to-type">
        fjkd fjkd fj fjkd kd fj fjkd kdfj jdfk djkf <br>
        dfkj fjkd kd kdjf jfkd ddff fj kkkk jfkd kdjk <br>
        fj jjkk fjk fjdj fjkd jdkf fj fkjd kjdf dfjk <br>
        fjdk ffff jfkd djkf fjkd ddjj jdfk kdjf fjkd
      </p>
      <textarea id="user-input" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ ØªÙ…Ø§Ù…Ù‹Ø§ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¸Ø§Ù‡Ø± Ø£Ø¹Ù„Ø§Ù‡..."></textarea>
    </div>
    <button onclick="submitChallenge()">Ø¥Ù†Ù‡Ø§Ø¡</button>
  </div>

  <div id="result">
    <h3>ğŸ’¡ Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>
    <p id="feedback"></p>
    <div id="error-details"></div>
    <button onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</button>
  </div>
</div>

<script>
  let timeLeft = 120;
  let timerInterval;

  function startChallenge() {
    document.getElementById('intro').style.display = 'none';
    document.getElementById('challenge').style.display = 'block';
    document.getElementById('typing-area').style.display = 'block';
    timerInterval = setInterval(() => {
      timeLeft--;
      document.getElementById("timer").textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitChallenge();
      }
    }, 1000);
  }

  function submitChallenge() {
    clearInterval(timerInterval);
    const expectedText = document.getElementById("text-to-type").innerText.replace(/\n/g, ' ').replace(/ +/g, ' ').trim();
    const userText = document.getElementById("user-input").value.replace(/\n/g, ' ').replace(/ +/g, ' ').trim();

    document.getElementById("challenge").style.display = 'none';
    document.getElementById("result").style.display = 'block';

    const expectedArray = expectedText.split('');
    const userArray = userText.split('');

    let errors = [];
    const minLen = Math.min(expectedArray.length, userArray.length);
    for (let i = 0; i < minLen; i++) {
      if (expectedArray[i] !== userArray[i]) {
        errors.push(`ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ ${i + 1}: Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ '${expectedArray[i]}', Ù„ÙƒÙ† ÙƒØªØ¨Øª '${userArray[i] || "ÙØ±Ø§Øº"}'`);
      }
    }
    if (expectedArray.length > userArray.length) {
      errors.push(`Ù†Ù‚Øµ ${expectedArray.length - userArray.length} Ø­Ø±Ù/Ø­Ø±ÙˆÙ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©.`);
    } else if (userArray.length > expectedArray.length) {
      errors.push(`Ø²ÙŠØ§Ø¯Ø© ${userArray.length - expectedArray.length} Ø­Ø±Ù/Ø­Ø±ÙˆÙ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©.`);
    }

    document.getElementById("feedback").textContent =
      errors.length === 0
        ? "ğŸ‘ Ø£Ø­Ø³Ù†Øª! ÙƒØªØ¨Øª Ø§Ù„Ù†Øµ Ø¨Ø¯Ù‚Ø© ØªØ§Ù…Ø© ÙˆÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯!"
        : `âŒ Ù‡Ù†Ø§Ùƒ ${errors.length} Ø®Ø·Ø£(Ø£Ø®Ø·Ø§Ø¡): Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªØ§Ù„ÙŠ:`;

    document.getElementById("error-details").innerHTML = errors.map(e => `â€¢ ${e}`).join('<br>');
  }
</script>
</body>
</html>
